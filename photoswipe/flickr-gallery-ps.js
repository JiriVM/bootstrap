function jsonFlickrApi(rsp) {

	//detect retina
	var retina = window.devicePixelRatio > 1 ? true : false;

	//makes sure everything's ok
	if (rsp.stat != "ok"){
  	return;
 	}
 	
 	//count number of responses
 	var num = rsp.photoset.photo.length;
 	
 	//variables "r" + "s" contain 
 	//markup generated by below loop
 	//r=retina, s=standard
 	var r = "";
 	var s = "";

 	//this loop runs through every item and creates HTML that will display nicely on your page
 	for (var i=0; i < num; i++) {
  	photo = rsp.photoset.photo[i];

	//create url for retina (o=original, bt=big thumb) and standard (st=standard thumb,
	//so= flickr "large")
  	o_url = 'http://farm'+ photo.farm +'.staticflickr.com/'+ photo.server +'/'+ 
  	photo.id +'_'+ photo.originalsecret +'_o.jpg';
  	
  	bt_url = 'http://farm'+ photo.farm +'.static.flickr.com/'+ photo.server +'/'+ 
  	photo.id +'_'+ photo.secret +'_n.jpg';
  	
  	st_url = 'http://farm'+ photo.farm +'.static.flickr.com/'+ photo.server +'/'+ 
  	photo.id +'_'+ photo.secret +'_q.jpg';
  	
  	so_url = 'http://farm'+ photo.farm +'.static.flickr.com/'+ photo.server +'/'+ 
  	photo.id +'_'+ photo.secret +'_b.jpg';
  	
  	r += '<li><a href="'+ o_url +'"><img alt="'+ photo.title +'" src="'+ bt_url +'" title="Click to view '+ photo.title +' full size"/></a></li>';
  	s += '<li><a href="'+ so_url +'"><img alt="'+ photo.title +'" src="'+ st_url +'" title="Click to view '+ photo.title +' full size"/></a></li>';
 	}

	//should be self explanatory
	if (retina){
	q = '<div id="MainContent"><ul id="Gallery" class="gallery">'+ r +' </ul></div>'
	}
	else{
	q = '<div id="MainContent"><ul id="Gallery" class="gallery">'+ s +' </ul></div>'
	}

 	//this tells the JavaScript to write everything in variable s onto the page
 	document.writeln(q); 
}